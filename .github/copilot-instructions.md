# Project Overview

Conduit is a social blogging site (i.e. a Medium.com clone). It uses a custom API for all requests, including authentication.

General functionality:

| Endpoint | Description | Returns | Auth                    |
|:---------|:------------|:-------|:------------------------|
| POST /api/users/login | Authenticates a user | User and JWT token | Allow Anonymous         |
| POST /api/users | Registers a new user | User and JWT token | Allow Anonymous         |
| GET /api/user | Returns the currently logged in user | User | Authentication Required |
| PUT /api/user | Update user | User | Authentication Required |
| GET /api/profiles/:username | Returns a profile | Profile | Authentication Optional |
| POST /api/profiles/:username/follow | Follow a user | Profile | Authentication Required |
| DELETE /api/profiles/:username/follow | Unfollow a user | Profile | Authentication Required |
| GET /api/articles | Returns most recent articles globally | Multiple Articles, Articles Count | Authentication Optional |
| GET /api/articles/feed | Returns most recent articles from followed users | Multiple Articles, Articles Count | Authentication Required |
| GET /api/articles/:slug | Returns an article | Article | Authentication Optional |
| POST /api/articles | Create an article | Article | Authentication Required |
| PUT /api/articles/:slug | Update an article | Article | Authentication Required |
| DELETE /api/articles/:slug | Delete an article | None | Authentication Required |
| POST /api/articles/:slug/comments | Add a comment to an article | Comment | Authentication Required |
| GET /api/articles/:slug/comments | Get comments for an article | Multiple Comments | Authentication Optional |
| DELETE /api/articles/:slug/comments/:id | Delete a comment | None | Authentication Required |
| POST /api/articles/:slug/favorite | Favorite an article | Article | Authentication Required |
| DELETE /api/articles/:slug/favorite | Unfavorite an article | Article | Authentication Required |
| GET /api/tags | Get all tags | Multiple Tags | Allow Anonymous         |

## Contributing
- You are not permitted to suppress warnings or errors in code unless explicitly instructed to do so.
- You are not permitted to modify any Archunit rules unless explicitly instructed to do so.
- Don't hardcode things or use magic strings.
- Do not use python, perl, awk, sed, or regex to perform mass refactorings. Only do direct updates.
- Make sure to run `./build.sh LintAllVerify` before committing to ensure code formatting and linting rules are satisfied.
- Make sure the postman tests are passing before finishing.
- Do not add any extraneous documentation unless asked to do so.
- All the nuke targets that run tests produce reports under `Reports` folder. Make sure to check them if any test fails.
- If you get stuck on an implementation detail related to a particular library use the docs-mcp-server to search for the relevant documentation.

## Folder Structure

- `/App`: Contains the source code for the application.
- `/App/Client`: Contains the source code for the React-Vite-Typescript frontend.
- `/App/Server`: Contains the source code for the .NET backend using the Ardalis Clean Architecture Template (without Aspire).
- `/Infra`: Contains Bicep files for Azure infrastructure as code.
- `/Test`: Contains playwright, postman, and performance tests.
- `/Task/Runner`: Contains Nuke build system files for linting, building, testing, and deployment tasks.
- `/Task/LocalDev`: Contains the docker-compose files for local development environment setup.
- `/Reports`: Contains test reports generated by the Test* Nuke build targets.

## Frontend Libraries and Frameworks
- React-Vite-Typescript
- Carbon Design System

## Backend Libraries and Frameworks
- .NET 9
- Ardalis Clean Architecture Template (without Aspire)
- FastEndpoints for minimal APIs
- MediatR for CQRS pattern
- Domain-Driven Design principles
- FluentValidation for request validation
- Entity Framework Core with Sqlite Database
- SpaProxy for development
- Serilog for logging
- xUnit for testing

## Testing
- There is a comprehensive Postman collection that can be run through `./build.sh test-server-postman`. The Postman collection is also split into folders which have their own Nuke targets and can independently test areas of the system. The quality of the Postman suite is excellent. If the Postman suite is green, then the backend api has been implemented correctly. 

## Infrastructure as Code
- Bicep for Azure infrastructure as code

## CI/CD
- GitHub Actions for CI/CD
- Docker for containerization
- Deployment to Azure App Service
- Nuke build system for lint, build, test and deployment tasks
  - The same Nuke build system is used for both local development and GitHub Actions CI/CD.