services:
  api:
    environment:
      Audit__LogsPath: /app/Logs/Test/Postman/Profiles/Server.Web/Audit.NET
      Serilog__WriteTo__1__Args__Path: /app/Logs/Test/Postman/Profiles/Server.Web/Serilog/logs.txt

  newman:
    volumes:
      - ../../Reports/Test/Postman/Profiles:/Reports/Test/Postman/Profiles
    entrypoint: >
      sh -c '
      BAIL_FLAG="";
      if [ "$$NEWMAN_BAIL" = "true" ]; then
        BAIL_FLAG="--bail";
      fi;
      newman run /etc/newman/Conduit.Profiles.postman_collection.json --delay-request 25 --reporters cli,json --reporter-json-export /Reports/Test/Postman/Profiles/Results/newman-report.json --global-var "APIURL=$$APIURL" --global-var "USERNAME=$$USERNAME" --global-var "EMAIL=$$EMAIL" --global-var "SECOND_EMAIL=$$SECOND_EMAIL" --global-var "PASSWORD=$$PASSWORD" --global-var "UPDATED_USERNAME=$$UPDATED_USERNAME" --global-var "UPDATED_EMAIL=$$UPDATED_EMAIL" --global-var "UPDATED_PASSWORD=$$UPDATED_PASSWORD" --global-var "UPDATED_BIO=$$UPDATED_BIO" --global-var "UPDATED_IMAGE=$$UPDATED_IMAGE" $$BAIL_FLAG
      '
